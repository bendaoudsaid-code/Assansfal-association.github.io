<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANSFAL - Association pour la Coopération, le Développement et l'Environnement</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a6d2c;
            --secondary: #2e8b57;
            --accent: #3cb371;
            --light: #f0f9f3;
            --dark: #145a32;
            --text: #333333;
            --white: #ffffff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --admin: #ff9800;
            --webmaster: #9c27b0;
            --whatsapp: #25D366;
            --warning: #ff9800;
            --success: #4caf50;
            --danger: #f44336;
            --info: #2196F3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background-color: var(--white);
            transition: all 0.3s ease;
            padding-top: 40px; /* Pour le compteur */
        }

        h1, h2, h3, h4 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 1rem;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ==================== COMPTEUR VISITEURS ==================== */
        .visitor-counter {
            background-color: var(--info);
            color: white;
            padding: 8px 0;
            font-size: 0.85rem;
            text-align: center;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .visitor-counter .container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .visitor-count {
            font-weight: bold;
            background: rgba(255,255,255,0.2);
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 0.9rem;
        }

        /* ==================== LANGUAGE SWITCHER ==================== */
        .language-switcher {
            position: fixed;
            top: 45px;
            right: 15px;
            z-index: 1001;
            display: flex;
            gap: 5px;
        }

        .lang-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lang-btn.active {
            background-color: var(--dark);
        }

        .lang-btn:hover {
            background-color: var(--secondary);
        }

        /* ==================== HEADER ==================== */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: fixed;
            width: 100%;
            top: 40px; /* Sous le compteur */
            z-index: 999;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2rem;
            color: var(--primary);
        }

        .logo-text h1 {
            font-size: 1.5rem;
            margin-bottom: 0;
            color: var(--primary);
        }

        .logo-text p {
            font-size: 0.8rem;
            color: var(--secondary);
            margin-top: -5px;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            transition: color 0.3s;
            padding: 5px 0;
            position: relative;
        }

        nav a:hover {
            color: var(--primary);
        }

        nav a:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary);
            transition: width 0.3s;
        }

        nav a:hover:after {
            width: 100%;
        }

        /* ==================== HERO SECTION ==================== */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80');
            background-size: cover;
            background-position: center;
            color: var(--white);
            text-align: center;
            padding: 180px 0 100px;
            margin-top: 95px; /* Header + compteur */
        }

        .hero h2 {
            font-size: 3rem;
            color: var(--white);
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 30px;
        }

        .btn {
            display: inline-block;
            background-color: var(--accent);
            color: var(--white);
            padding: 12px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            border: 2px solid var(--accent);
        }

        .btn:hover {
            background-color: transparent;
            color: var(--accent);
        }

        /* ==================== SECTIONS ==================== */
        section {
            padding: 80px 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-title {
            position: relative;
            display: inline-block;
            padding-bottom: 15px;
        }

        .section-title h2 {
            font-size: 2.5rem;
        }

        .section-title h2:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background-color: var(--accent);
        }

        /* ==================== À PROPOS ==================== */
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
        }

        .about-img {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .about-img img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s;
        }

        .about-img:hover img {
            transform: scale(1.05);
        }

        /* ==================== BARRES ADMIN SIMPLIFIÉES ==================== */
        .admin-overlay, .webmaster-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .admin-overlay.active, .webmaster-overlay.active {
            display: flex;
        }

        .admin-panel, .webmaster-panel {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow);
        }

        .admin-panel h3, .webmaster-panel h3 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .admin-buttons, .webmaster-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .admin-btn, .webmaster-btn {
            background-color: var(--dark);
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 5px;
            cursor: pointer;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .admin-btn:hover, .webmaster-btn:hover {
            background-color: var(--primary);
            transform: translateX(5px);
        }

        /* ==================== BOUTONS FLOTTANTS ==================== */
        .whatsapp-float {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background-color: var(--whatsapp);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }

        .whatsapp-float:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(37, 211, 102, 0.4);
        }

        .login-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--admin);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .webmaster-btn-float {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: var(--webmaster);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .comments-btn {
            position: fixed;
            bottom: 140px;
            right: 20px;
            background-color: var(--info);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .media-library-btn {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background-color: var(--primary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            display: none;
        }

        .media-library-btn.active {
            display: flex;
        }

        .comments-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ==================== CONTENU ÉDITABLE ==================== */
        .edit-btn, .image-edit-btn, .add-section-btn, .add-item-btn, .remove-item-btn {
            position: absolute;
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            z-index: 100;
            box-shadow: var(--shadow);
            transition: all 0.3s;
        }

        .edit-btn {
            top: 10px;
            right: 10px;
            width: 35px;
            height: 35px;
        }

        .image-edit-btn {
            top: 10px;
            left: 10px;
            width: 35px;
            height: 35px;
        }

        .add-section-btn {
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
        }

        .add-item-btn {
            bottom: 10px;
            right: 10px;
            width: 35px;
            height: 35px;
        }

        .remove-item-btn {
            bottom: 10px;
            left: 10px;
            width: 35px;
            height: 35px;
            background-color: var(--danger);
        }

        .editable:hover .edit-btn,
        .image-editable:hover .image-edit-btn,
        .section-header:hover .add-section-btn,
        .gallery-item:hover .add-item-btn,
        .video-item:hover .add-item-btn,
        .project-card:hover .add-item-btn,
        .publication-card:hover .add-item-btn,
        .gallery-item:hover .remove-item-btn,
        .video-item:hover .remove-item-btn,
        .project-card:hover .remove-item-btn,
        .publication-card:hover .remove-item-btn {
            display: flex;
        }

        /* ==================== RESPONSIVE ==================== */
        @media (max-width: 768px) {
            .visitor-counter .container {
                flex-direction: column;
                gap: 5px;
            }
            
            .header-container {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
            
            .hero {
                padding: 120px 0 60px;
                margin-top: 95px;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .about-content {
                grid-template-columns: 1fr;
            }
            
            .whatsapp-float {
                bottom: 70px;
                right: 15px;
            }
            
            .comments-btn {
                bottom: 130px;
                right: 15px;
            }
            
            .login-btn {
                bottom: 15px;
                right: 15px;
            }
            
            .webmaster-btn-float {
                bottom: 70px;
                left: 15px;
            }
            
            .media-library-btn {
                bottom: 130px;
                left: 15px;
            }
        }

        @media (max-width: 480px) {
            .visitor-counter {
                font-size: 0.75rem;
            }
            
            .language-switcher {
                top: 40px;
                right: 10px;
            }
            
            .logo-text h1 {
                font-size: 1.3rem;
            }
            
            .section-title h2 {
                font-size: 2rem;
            }
        }

        /* ==================== MODALES ==================== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        /* ==================== RTL SUPPORT ==================== */
        body.rtl {
            direction: rtl;
            text-align: right;
        }

        body.rtl .logo {
            flex-direction: row-reverse;
        }
        
        body.rtl nav ul {
            flex-direction: row-reverse;
        }
        
        body.rtl .edit-btn {
            left: 10px;
            right: auto;
        }
        
        body.rtl .image-edit-btn {
            right: 10px;
            left: auto;
        }
        
        body.rtl .add-section-btn {
            left: 10px;
            right: auto;
        }
        
        body.rtl .add-item-btn {
            left: 10px;
            right: auto;
        }
        
        body.rtl .remove-item-btn {
            right: 10px;
            left: auto;
        }
        
        body.rtl .language-switcher {
            right: auto;
            left: 15px;
        }
        
        body.rtl .whatsapp-float {
            right: auto;
            left: 20px;
        }
        
        body.rtl .login-btn {
            right: auto;
            left: 20px;
        }
        
        body.rtl .webmaster-btn-float {
            left: auto;
            right: 20px;
        }
        
        body.rtl .media-library-btn {
            left: auto;
            right: 20px;
        }
        
        body.rtl .comments-btn {
            right: auto;
            left: 20px;
        }
    </style>
</head>
<body>
    <!-- ==================== COMPTEUR VISITEURS ==================== -->
    <div class="visitor-counter" id="visitorCounter">
        <div class="container">
            <span id="visitorsLabel">Visiteurs: <span class="visitor-count" id="totalVisitors">0</span></span>
            <span id="onlineLabel">En ligne: <span class="visitor-count" id="onlineVisitors">0</span></span>
            <span id="lastVisitLabel">Dernière visite: <span id="lastVisit">--/--/---- --:--:--</span></span>
        </div>
    </div>

    <!-- ==================== SÉLECTEUR DE LANGUE ==================== -->
    <div class="language-switcher">
        <button class="lang-btn active" onclick="changeLanguage('fr')">
            <i class="fas fa-flag"></i> FR
        </button>
        <button class="lang-btn" onclick="changeLanguage('ar')">
            <i class="fas fa-star-and-crescent"></i> AR
        </button>
    </div>

    <!-- ==================== PANELS ADMIN/WEBMASTER ==================== -->
    <div class="admin-overlay" id="adminOverlay">
        <div class="admin-panel">
            <h3><i class="fas fa-user-shield"></i> Mode Administrateur</h3>
            <div class="admin-buttons">
                <button class="admin-btn" onclick="saveContent()">
                    <i class="fas fa-save"></i> Sauvegarder le contenu
                </button>
                <button class="admin-btn" onclick="showMediaLibrary()">
                    <i class="fas fa-images"></i> Bibliothèque média
                </button>
                <button class="admin-btn" onclick="showCommentsAdmin()">
                    <i class="fas fa-comments"></i> Gérer les commentaires
                </button>
                <button class="admin-btn" onclick="showUserManagement()">
                    <i class="fas fa-users"></i> Gestion des utilisateurs
                </button>
                <button class="admin-btn" onclick="showChangePasswordModal('admin')">
                    <i class="fas fa-key"></i> Changer mot de passe
                </button>
                <button class="admin-btn" onclick="logoutAdmin()" style="background-color: var(--danger); margin-top: 20px;">
                    <i class="fas fa-sign-out-alt"></i> Déconnexion
                </button>
            </div>
            <button class="btn" onclick="hideAdminPanel()" style="width: 100%; margin-top: 20px; background-color: var(--dark);">
                <i class="fas fa-times"></i> Fermer
            </button>
        </div>
    </div>

    <div class="webmaster-overlay" id="webmasterOverlay">
        <div class="webmaster-panel">
            <h3><i class="fas fa-user-cog"></i> Mode Webmaster</h3>
            <div class="webmaster-buttons">
                <button class="webmaster-btn" onclick="showMediaLibrary()">
                    <i class="fas fa-images"></i> Bibliothèque média
                </button>
                <button class="webmaster-btn" onclick="showUploadModal()">
                    <i class="fas fa-cloud-upload-alt"></i> Uploader fichiers
                </button>
                <button class="webmaster-btn" onclick="showCommentsAdmin()">
                    <i class="fas fa-comments"></i> Modérer commentaires
                </button>
                <button class="webmaster-btn" onclick="showChangePasswordModal('webmaster')">
                    <i class="fas fa-key"></i> Changer mot de passe
                </button>
                <button class="webmaster-btn" onclick="logoutWebmaster()" style="background-color: var(--danger); margin-top: 20px;">
                    <i class="fas fa-sign-out-alt"></i> Déconnexion
                </button>
            </div>
            <button class="btn" onclick="hideWebmasterPanel()" style="width: 100%; margin-top: 20px; background-color: var(--dark);">
                <i class="fas fa-times"></i> Fermer
            </button>
        </div>
    </div>

    <!-- ==================== EN-TÊTE ==================== -->
    <header>
        <div class="container header-container">
            <div class="logo editable" data-id="logo">
                <i class="fas fa-hands-helping"></i>
                <div class="logo-text">
                    <h1 data-editable="true" data-id="siteTitle">ASSOCIATION ANSFAL</h1>
                    <p data-editable="true" data-id="siteSubtitle">Coopération, Développement & Environnement</p>
                </div>
                <button class="edit-btn" onclick="editText('siteTitle')">
                    <i class="fas fa-edit"></i>
                </button>
            </div>
            
            <nav>
                <ul>
                    <li><a href="#home" id="navHome">Accueil</a></li>
                    <li><a href="#about" id="navAbout">À propos</a></li>
                    <li><a href="#gallery" id="navGallery">Galerie</a></li>
                    <li><a href="#videos" id="navVideos">Vidéos</a></li>
                    <li><a href="#projects" id="navProjects">Projets</a></li>
                    <li><a href="#publications" id="navPublications">Publications</a></li>
                    <li><a href="#comments" id="navComments">Commentaires</a></li>
                    <li><a href="#contact" id="navContact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- ==================== SECTION HÉRO ==================== -->
    <section class="hero" id="home">
        <div class="container">
            <h2 class="editable" data-id="heroTitle" data-editable="true">ANSFAL</h2>
            <button class="edit-btn" onclick="editText('heroTitle')">
                <i class="fas fa-edit"></i>
            </button>
            
            <h3 class="editable" data-id="heroSubtitle" data-editable="true">Association pour la Coopération, le Développement et l'Environnement</h3>
            <button class="edit-btn" onclick="editText('heroSubtitle')">
                <i class="fas fa-edit"></i>
            </button>
            
            <p class="editable" data-id="heroText" data-editable="true">Œuvrant pour un développement durable, la coopération nationale et la protection de l'environnement depuis 2023.</p>
            <button class="edit-btn" onclick="editText('heroText')">
                <i class="fas fa-edit"></i>
            </button>
            
            <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 30px;">
                <a href="#projects" class="btn" id="btnDiscover">Découvrir nos actions</a>
                <a href="#gallery" class="btn" id="btnGallery" style="background-color: var(--info); border-color: var(--info);">
                    <i class="fas fa-images"></i> Galerie
                </a>
                <a href="#comments" class="btn" id="btnComments" style="background-color: var(--warning); border-color: var(--warning);" onclick="scrollToComments()">
                    <i class="fas fa-comments"></i> Commentaires
                </a>
            </div>
        </div>
    </section>

    <!-- ==================== À PROPOS ==================== -->
    <section class="about" id="about">
        <div class="container">
            <div class="section-header">
                <div class="section-title">
                    <h2 class="editable" data-id="aboutTitle" data-editable="true">À propos d'ANSFAL</h2>
                    <button class="edit-btn" onclick="editText('aboutTitle')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <button class="add-section-btn" onclick="addAboutItem()" title="Ajouter un élément">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="about-content">
                <div class="about-text">
                    <h3 class="editable" data-id="aboutSubtitle" data-editable="true">Notre histoire</h3>
                    <button class="edit-btn" onclick="editText('aboutSubtitle')">
                        <i class="fas fa-edit"></i>
                    </button>
                    
                    <p class="editable" data-id="aboutText1" data-editable="true">Fondée en 2023, l'Association ANSFAL POUR LA COOPÉRATION ET LE DÉVELOPPEMENT ET L'ENVIRONNEMENT est née de la conviction que le développement humain et la protection environnementale doivent aller de pair.</p>
                    <button class="edit-btn" onclick="editText('aboutText1')">
                        <i class="fas fa-edit"></i>
                    </button>
                    
                    <p class="editable" data-id="aboutText2" data-editable="true">Notre nom 'ANSFAL' symbolise notre engagement pour un avenir meilleur, basé sur la solidarité, le développement durable et la préservation de notre environnement.</p>
                    <button class="edit-btn" onclick="editText('aboutText2')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="about-img image-editable" data-id="aboutImage">
                    <img src="https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80" alt="Équipe ANSFAL">
                    <button class="image-edit-btn" onclick="editImage('aboutImage')">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== BOUTONS FLOTTANTS ==================== -->
    <a href="#" class="whatsapp-float" id="whatsappBtn">
        <i class="fab fa-whatsapp"></i>
    </a>

    <button class="media-library-btn" id="mediaLibraryBtn" onclick="showMediaLibrary()">
        <i class="fas fa-images"></i>
    </button>

    <button class="comments-btn" id="commentsBtn" onclick="showCommentsModal()">
        <i class="fas fa-comments"></i>
        <span class="comments-badge"></span>
    </button>

    <button class="login-btn" id="loginBtn" onclick="showLoginModal()">
        <i class="fas fa-user-shield"></i>
    </button>

    <button class="webmaster-btn-float" id="webmasterBtn" onclick="showWebmasterLoginModal()">
        <i class="fas fa-user-cog"></i>
    </button>

    <!-- ==================== JAVASCRIPT SIMPLIFIÉ ==================== -->
    <script>
        // Variables globales
        let isAdmin = false;
        let isWebmaster = false;
        let currentLanguage = 'fr';

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Mettre à jour le compteur
            updateVisitorCount();
            
            // Charger la langue
            const savedLang = localStorage.getItem('ansfal_language') || 'fr';
            changeLanguage(savedLang);
            
            // Vérifier les sessions
            checkAdminStatus();
            checkWebmasterStatus();
            
            // Initialiser WhatsApp
            initWhatsApp();
            
            // Initialiser la navigation
            initNavigation();
        });

        // ==================== FONCTIONS D'AFFICHAGE ====================
        function showAdminPanel() {
            document.getElementById('adminOverlay').classList.add('active');
            showEditButtons();
        }

        function hideAdminPanel() {
            document.getElementById('adminOverlay').classList.remove('active');
        }

        function showWebmasterPanel() {
            document.getElementById('webmasterOverlay').classList.add('active');
            document.getElementById('mediaLibraryBtn').classList.add('active');
            showUploadButtons();
        }

        function hideWebmasterPanel() {
            document.getElementById('webmasterOverlay').classList.remove('active');
        }

        function showEditButtons() {
            document.querySelectorAll('.edit-btn, .image-edit-btn, .add-section-btn, .add-item-btn, .remove-item-btn').forEach(btn => {
                btn.style.display = 'flex';
            });
        }

        function hideEditButtons() {
            if (!isAdmin && !isWebmaster) {
                document.querySelectorAll('.edit-btn, .image-edit-btn, .add-section-btn, .add-item-btn, .remove-item-btn').forEach(btn => {
                    btn.style.display = 'none';
                });
            }
        }

        function showUploadButtons() {
            document.querySelectorAll('.add-section-btn, .add-item-btn, .remove-item-btn').forEach(btn => {
                btn.style.display = 'flex';
            });
        }

        function hideUploadButtons() {
            if (!isAdmin && !isWebmaster) {
                document.querySelectorAll('.add-section-btn, .add-item-btn, .remove-item-btn').forEach(btn => {
                    btn.style.display = 'none';
                });
            }
        }

        // ==================== GESTION DES LANGUES ====================
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('ansfal_language', lang);
            
            // Mettre à jour les boutons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.lang-btn[onclick="changeLanguage('${lang}')"]`).classList.add('active');
            
            // Appliquer la direction
            if (lang === 'ar') {
                document.body.classList.add('rtl');
            } else {
                document.body.classList.remove('rtl');
            }
            
            // Traductions simples
            const translations = {
                'fr': {
                    'siteTitle': 'ASSOCIATION ANSFAL',
                    'siteSubtitle': 'Coopération, Développement & Environnement',
                    'navHome': 'Accueil',
                    'navAbout': 'À propos',
                    'navGallery': 'Galerie',
                    'navVideos': 'Vidéos',
                    'navProjects': 'Projets',
                    'navPublications': 'Publications',
                    'navComments': 'Commentaires',
                    'navContact': 'Contact',
                    'heroTitle': 'ANSFAL',
                    'heroSubtitle': 'Association pour la Coopération, le Développement et l\'Environnement',
                    'heroText': 'Œuvrant pour un développement durable, la coopération nationale et la protection de l\'environnement depuis 2023.',
                    'btnDiscover': 'Découvrir nos actions',
                    'aboutTitle': 'À propos d\'ANSFAL',
                    'aboutSubtitle': 'Notre histoire',
                    'aboutText1': 'Fondée en 2023, l\'Association ANSFAL POUR LA COOPÉRATION ET LE DÉVELOPPEMENT ET L\'ENVIRONNEMENT est née de la conviction que le développement humain et la protection environnementale doivent aller de pair.',
                    'aboutText2': 'Notre nom \'ANSFAL\' symbolise notre engagement pour un avenir meilleur, basé sur la solidarité, le développement durable et la préservation de notre environnement.',
                    'visitorsLabel': 'Visiteurs:',
                    'onlineLabel': 'En ligne:',
                    'lastVisitLabel': 'Dernière visite:'
                },
                'ar': {
                    'siteTitle': 'جمعية أنسفال',
                    'siteSubtitle': 'التعاون، التنمية والبيئة',
                    'navHome': 'الرئيسية',
                    'navAbout': 'عن الجمعية',
                    'navGallery': 'المعرض',
                    'navVideos': 'فيديوهات',
                    'navProjects': 'المشاريع',
                    'navPublications': 'المنشورات',
                    'navComments': 'التعليقات',
                    'navContact': 'اتصل',
                    'heroTitle': 'أنسفال',
                    'heroSubtitle': 'جمعية التعاون والتنمية والبيئة',
                    'heroText': 'تعمل من أجل التنمية المستدامة، والتعاون  وحماية البيئة منذ 2023.',
                    'btnDiscover': 'اكتشف أنشطتنا',
                    'aboutTitle': 'عن أنسفال',
                    'aboutSubtitle': 'تاريخنا',
                    'aboutText1': 'تأسست في عام 2023، جمعية أنسفال للتعاون والتنمية والبيئة ولدت من قناعة بأن التنمية البشرية وحماية البيئة يجب أن يسيرا جنباً إلى جنب.',
                    'aboutText2': 'اسمنا \'أنسفال\' يرمز لالتزامنا بمستقبل أفضل، يقوم على التضامن والتنمية المستدامة والحفاظ على بيئتنا.',
                    'visitorsLabel': 'الزوار:',
                    'onlineLabel': 'متصل الآن:',
                    'lastVisitLabel': 'آخر زيارة:'
                }
            };
            
            // Appliquer les traductions
            Object.keys(translations[lang]).forEach(key => {
                const element = document.querySelector(`[data-id="${key}"]`);
                if (element) {
                    element.textContent = translations[lang][key];
                }
                
                // Éléments spéciaux
                if (key === 'visitorsLabel') {
                    document.getElementById('visitorsLabel').innerHTML = `${translations[lang][key]} <span class="visitor-count" id="totalVisitors">0</span>`;
                }
                if (key === 'onlineLabel') {
                    document.getElementById('onlineLabel').innerHTML = `${translations[lang][key]} <span class="visitor-count" id="onlineVisitors">0</span>`;
                }
                if (key === 'lastVisitLabel') {
                    document.getElementById('lastVisitLabel').innerHTML = `${translations[lang][key]} <span id="lastVisit">--/--/---- --:--:--</span>`;
                }
            });
        }

        // ==================== GESTION DES VISITEURS ====================
        function updateVisitorCount() {
            // Simuler des données de visiteurs
            const total = localStorage.getItem('ansfal_total_visitors') || 319;
            const online = 1;
            const lastVisit = '24/12/2025 14:22:17';
            
            // Mettre à jour l'affichage
            document.getElementById('totalVisitors').textContent = total;
            document.getElementById('onlineVisitors').textContent = online;
            document.getElementById('lastVisit').textContent = lastVisit;
        }

        // ==================== ÉDITION DU CONTENU ====================
        function editText(elementId) {
            const element = document.querySelector(`[data-id="${elementId}"]`);
            const currentText = element.textContent;
            const newText = prompt('Modifier le texte:', currentText);
            
            if (newText !== null && newText !== currentText) {
                element.textContent = newText;
                // Sauvegarder dans localStorage
                const contentData = JSON.parse(localStorage.getItem('ansfal_content') || '{}');
                contentData[elementId] = newText;
                localStorage.setItem('ansfal_content', JSON.stringify(contentData));
            }
        }

        function editImage(elementId) {
            const url = prompt('Entrez l\'URL de la nouvelle image:');
            if (url) {
                const element = document.querySelector(`[data-id="${elementId}"] img`);
                if (element) {
                    element.src = url;
                    // Sauvegarder dans localStorage
                    const contentData = JSON.parse(localStorage.getItem('ansfal_content') || '{}');
                    contentData[elementId + '_img'] = url;
                    localStorage.setItem('ansfal_content', JSON.stringify(contentData));
                }
            }
        }

        function saveContent() {
            alert('Contenu sauvegardé avec succès!');
        }

        // ==================== AUTHENTIFICATION ====================
        function showLoginModal() {
            const password = prompt('Mot de passe administrateur:');
            if (password === 'admin123') {
                isAdmin = true;
                localStorage.setItem('ansfal_admin_logged_in', 'true');
                showAdminPanel();
                alert('Connexion réussie!');
            } else {
                alert('Mot de passe incorrect!');
            }
        }

        function showWebmasterLoginModal() {
            const password = prompt('Mot de passe webmaster:');
            if (password === 'web123') {
                isWebmaster = true;
                localStorage.setItem('ansfal_webmaster_logged_in', 'true');
                showWebmasterPanel();
                alert('Connexion réussie!');
            } else {
                alert('Mot de passe incorrect!');
            }
        }

        function checkAdminStatus() {
            if (localStorage.getItem('ansfal_admin_logged_in') === 'true') {
                isAdmin = true;
                showEditButtons();
            }
        }

        function checkWebmasterStatus() {
            if (localStorage.getItem('ansfal_webmaster_logged_in') === 'true') {
                isWebmaster = true;
                document.getElementById('mediaLibraryBtn').classList.add('active');
                showUploadButtons();
            }
        }

        function logoutAdmin() {
            isAdmin = false;
            localStorage.removeItem('ansfal_admin_logged_in');
            hideEditButtons();
            hideAdminPanel();
            alert('Déconnexion réussie!');
        }

        function logoutWebmaster() {
            isWebmaster = false;
            localStorage.removeItem('ansfal_webmaster_logged_in');
            document.getElementById('mediaLibraryBtn').classList.remove('active');
            hideUploadButtons();
            hideWebmasterPanel();
            alert('Déconnexion réussie!');
        }

        // ==================== FONCTIONS UTILITAIRES ====================
        function initWhatsApp() {
            document.getElementById('whatsappBtn').href = 'https://wa.me/212612345678';
            document.getElementById('whatsappBtn').target = '_blank';
        }

        function initNavigation() {
            // Navigation fluide
            document.querySelectorAll('nav a').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href.startsWith('#')) {
                        e.preventDefault();
                        const targetId = href.substring(1);
                        const targetElement = document.getElementById(targetId);
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 100,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });
        }

        function scrollToComments() {
            const commentsSection = document.getElementById('comments');
            if (commentsSection) {
                window.scrollTo({
                    top: commentsSection.offsetTop - 100,
                    behavior: 'smooth'
                });
            }
        }

        function showMediaLibrary() {
            alert('Bibliothèque média - Fonction à implémenter');
        }

        function showUploadModal() {
            alert('Upload de fichiers - Fonction à implémenter');
        }

        function showCommentsAdmin() {
            scrollToComments();
        }

        function showCommentsModal() {
            scrollToComments();
        }

        function showUserManagement() {
            alert('Gestion des utilisateurs - Fonction à implémenter');
        }

        function showChangePasswordModal(role) {
            const newPass = prompt('Nouveau mot de passe:');
            if (newPass) {
                alert(`Mot de passe ${role} changé avec succès!`);
            }
        }

        function addAboutItem() {
            const text = prompt('Ajouter un nouveau texte:');
            if (text) {
                const aboutText = document.querySelector('.about-text');
                const newPara = document.createElement('p');
                newPara.textContent = text;
                newPara.className = 'editable';
                aboutText.appendChild(newPara);
            }
        }

        // ==================== NOTIFICATIONS ====================
        function showNotification(message, type = 'info') {
            // Créer une notification simple
            alert(message);
        }

    </script>
</body>
</html>
